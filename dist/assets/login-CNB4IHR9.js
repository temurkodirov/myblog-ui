import{c as i,r as m,e as b,m as v,a as f}from"./index-DdAual5n.js";import{u as y}from"./index-rtgCEYFi.js";import{g as k,u as x,r as P,o as l,c as d,a as s,k as h,v as V,n as c,t as p,e as g,I as z,b as _,w,d as M}from"./index-BxNye9P6.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C={name:"login",data(){return{showPassword:!1,user:{email:"",password:""}}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},errorToast(){this.toast.error("Login yoki parol xato",{position:"top-right",timeout:1800,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1})},async loginFunction(){if(this.v$.user.$touch(),this.v$.user.$invalid){window.scrollTo({top:0,behavior:"smooth"});return}try{const o=await k.post("auth/login",this.user);o.status===200?(localStorage.setItem("token",o.data.token),this.$router.push("/")):this.errorToast()}catch(o){this.errorToast(),console.error(o.message)}}},validations:{user:{email:{required:i.withMessage("Yozilishi shart",m),email:i.withMessage("Email manzilingiz noto'g'ri",b)},password:{required:i.withMessage("Yozilishi shart",m),minLength:i.withMessage("3 ta belgidan ko'p  bo'lishi kerak",v(3)),maxLength:i.withMessage("100 ta belgidan kam bo'lishi kerak",f(100))}}},setup(){const o=y(),e=x();return{v$:o,toast:e}}},$={class:"container-xxl"},T={class:"authentication-wrapper authentication-basic container-p-y"},L={class:"authentication-inner"},q={class:"card"},E={class:"card-body"},F=s("div",{class:"app-brand justify-content-center"},[s("span",{class:"app-brand-text demo text-body fw-bolder"},"MyBlog.uz")],-1),N=s("h4",{class:"mb-2"},'"Myblog.uz" ga Hush kelibsiz! ðŸ‘‹',-1),O=s("p",{class:"mb-2"},"Barcha foydalik ma'lumotlar shu yerda",-1),D={class:"mb-3"},H=s("label",{for:"email",class:"form-label"},"Email",-1),j={key:0,class:"invalid-input-text"},I={class:"mb-3 form-password-toggle"},R=s("div",{class:"d-flex justify-content-between"},[s("label",{class:"form-label",for:"password"},"Parol")],-1),S={class:"input-group input-group-merge"},U=["type"],Y={key:0,class:"invalid-input-text"},A={class:"mb-3"},K={class:"text-center"},G=s("span",{class:"me-2"},"Akkauntingiz yo'qmi?",-1),J=s("span",null,"Ro'yhatdan o'ting",-1);function Q(o,e,W,a,r,n){const u=P("router-link");return l(),d("div",$,[s("div",T,[s("div",L,[s("div",q,[s("div",E,[F,N,O,s("div",D,[H,h(s("input",{type:"text",class:c(["form-control",{"invalid-input":a.v$.user.email.$error}]),id:"email",name:"email-username","onUpdate:modelValue":e[0]||(e[0]=t=>r.user.email=t),placeholder:"Enter your email or username",autofocus:""},null,2),[[V,r.user.email]]),a.v$.user.email.$error?(l(),d("div",j,p(a.v$.user.email.$errors[0].$message),1)):g("",!0)]),s("div",I,[R,s("div",S,[h(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>r.user.password=t),type:r.showPassword?"text":"password",id:"password",class:c(["form-control",{"invalid-input-password":a.v$.user.password.$error}]),name:"password",placeholder:"******","aria-describedby":"password"},null,10,U),[[z,r.user.password]]),s("span",{onClick:e[2]||(e[2]=(...t)=>n.togglePasswordVisibility&&n.togglePasswordVisibility(...t)),class:"input-group-text cursor-pointer"},[s("i",{class:c(r.showPassword?"fa-solid fa-eye-slash":"fa-solid fa-eye")},null,2)]),a.v$.user.password.$error?(l(),d("div",Y,p(a.v$.user.password.$errors[0].$message),1)):g("",!0)])]),s("div",A,[s("button",{onClick:e[3]||(e[3]=(...t)=>n.loginFunction&&n.loginFunction(...t)),class:"btn btn-primary d-grid w-100",type:"submit"},"Kirish"),_(u,{to:"/",class:"btn btn-dark d-grid w-100 mt-2",type:"submit"},{default:w(()=>[M("Ro'yhatdan o'tmasdan davom etish")]),_:1})]),s("p",K,[G,_(u,{to:"/auth/register"},{default:w(()=>[J]),_:1})])])])])])])}const os=B(C,[["render",Q]]);export{os as default};
