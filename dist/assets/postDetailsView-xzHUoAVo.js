import{i as w}from"./imagePathfixer-CcxXgNhq.js";import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as i,c as l,a as t,F as p,h as _,n as x,i as y,g as d,u as k,r as f,t as o,b as I,k as C,v as z,e as v,m as P,w as B}from"./index-BxNye9P6.js";import{f as D}from"./formateDate-BvL5N5Zm.js";import{u as N}from"./index-rtgCEYFi.js";import{c as h,r as T,m as $,a as j}from"./index-DdAual5n.js";const q={name:"postDetailCarousel",methods:{imagePathfixer:w,getInterval(s){return s===0?3e3:4e3}},props:{listImagesDetail:{type:Array,required:!0,default:()=>[]}}},M={id:"carouselExampleInterval",class:"carousel slide","data-bs-ride":"carousel"},O={class:"carousel-inner"},V=["data-bs-interval"],A=["src","alt"],L=y('<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev" data-v-bcadb04f><span class="carousel-control-prev-icon" aria-hidden="true" data-v-bcadb04f></span><span class="visually-hidden" data-v-bcadb04f>Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next" data-v-bcadb04f><span class="carousel-control-next-icon" aria-hidden="true" data-v-bcadb04f></span><span class="visually-hidden" data-v-bcadb04f>Next</span></button>',2);function F(s,n,b,u,e,r){return i(),l("div",M,[t("div",O,[(i(!0),l(p,null,_(b.listImagesDetail,(m,c)=>(i(),l("div",{class:x(["border-3 shadow",["carousel-item",{active:c===0}]]),key:c,"data-bs-interval":r.getInterval(c)},[t("img",{src:r.imagePathfixer(m.imagePath),class:"d-block w-100 imageSize rounded",alt:"Image "+(c+1)},null,8,A)],10,V))),128))]),L])}const S=g(q,[["render",F],["__scopeId","data-v-bcadb04f"]]),E={name:"postDetailsView",components:{PostDetailCarousel:S},props:["blogId"],data(){return{post:{id:0,title:"",content:"",userId:0,categoryId:0,images:[],updatedAt:"",createdAt:""},categories:[],user:{id:0,firstName:"",lastName:"",isMale:!1,email:"",phoneNumber:"",imagePath:"",createdAt:"2024-08-29T07:13:50.993016Z",updatedAt:"2024-08-29T07:13:50.993016Z"},coment:{postId:0,content:""},postComents:[]}},methods:{formatDate:D,async fetchCategory(){try{let s=await d.get("category/get-all?PageSize=50");s.status===200&&(this.categories=s.data.items,this.selectedCategory=this.categories[0].id)}catch(s){console.error(s.message)}},async fetPost(){try{let s=await d.get("post/get/"+this.blogId);s.status===200&&(this.post={...s.data})}catch(s){console.error(s.message)}},async fetchUser(){let s=await d.get("people/get/"+this.post.userId);s.status===200&&(this.user={...s.data})},async fetchComents(){let s=await d.get("coment/get-all?PostId="+this.blogId);s.status===200&&(this.postComents=s.data.items)},successToast(){this.toast.success("Muvaffaqiyatlik yakunlandi",{position:"top-right",timeout:1800,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1})},errorToast(){this.toast.error("Xatolik yuz berdi",{position:"top-right",timeout:1800,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1})},async createComent(){if(this.v$.coment.$touch(),this.v$.coment.$invalid)return;this.coment.postId=this.blogId;let s={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}};(await d.post("coment/create",this.coment,s)).status===200&&(this.successToast(),this.coment.content="",await this.fetchComents(),this.v$.$reset())}},async mounted(){await this.fetPost(),await this.fetchCategory(),await this.fetchUser(),await this.fetchComents()},setup(){const s=N(),n=k();return{v$:s,toast:n}},validations:{coment:{content:{required:h.withMessage("Yozilishi shart",T),minLength:h.withMessage("1 ta belgidan ko'p  bo'lishi kerak",$(3)),maxLength:h.withMessage("9900 ta belgidan kam bo'lishi kerak",j(100))}}}},H={class:"container-xxl flex-grow-1 container-p-y"},U={class:"row"},Y={class:"col-md-6 col-lg-3 col-xl-3 order-0 mb-4"},Z={class:"card"},X={class:"card-body"},G={class:"p-0 m-0"},J={class:"d-flex pb-1"},K=t("div",{class:"avatar flex-shrink-0 me-3"},[t("span",{class:"avatar-initial rounded bg-label-dark"},[t("i",{class:"bx bx-category"})])],-1),Q={class:"d-flex w-100 flex-wrap align-items-center justify-content-between gap-2"},R={class:"me-2"},W=t("span",{style:{"font-size":"14px"},class:"mb-0 text-muted"},"Blog turi:",-1),tt={key:0,class:"text-primary"},st={class:"d-flex pb-1"},et=t("div",{class:"avatar flex-shrink-0 me-3"},[t("span",{class:"avatar-initial rounded bg-label-dark"},[t("i",{class:"bx bx-user"})])],-1),at={class:"d-flex w-100 flex-wrap align-items-center justify-content-between gap-2"},ot={class:"me-2"},it=t("span",{style:{"font-size":"14px"},class:"mb-0 text-muted"}," Muallif ",-1),lt={class:"text-primary"},nt={class:"d-flex pb-1"},rt=t("div",{class:"avatar flex-shrink-0 me-3"},[t("span",{class:"avatar-initial rounded bg-label-dark"},[t("i",{class:"bx bx-calendar"})])],-1),ct={class:"d-flex w-100 flex-wrap align-items-center justify-content-between gap-2"},dt={class:"me-2"},ut=t("span",{style:{"font-size":"14px"},class:"mb-0 text-muted"},"Yaratilgan sana",-1),mt={class:"text-primary"},ht=y('<li class="d-flex pb-1"><div class="avatar flex-shrink-0 me-3"><span class="avatar-initial rounded bg-label-dark"><i class="bx bx-time-five"></i></span></div><div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2"><div class="me-2"><span style="font-size:14px;" class="mb-0 text-muted">O&#39;qish vaqti</span><h6 class="text-primary"> 5 minut </h6></div></div></li><li class="d-flex"><div class="avatar flex-shrink-0 me-3"><span class="avatar-initial rounded bg-label-dark"><i class="bx bx-brain"></i></span></div><div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2"><div class="me-2"><span style="font-size:14px;" class="mb-0 text-muted">Tushunish darajasi</span><h6 class="text-primary"> ⭐️⭐️⭐️ </h6></div></div></li>',2),pt={class:"card mt-3"},_t={class:"card-body"},bt=t("h6",null,"Izohlar",-1),ft={class:"p-0 m-0",style:{"list-style":"none"}},vt={class:"d-flex mb-3 pb-1 border-bottom"},gt=t("div",{class:"avatar flex-shrink-0 me-3"},[t("span",{class:"avatar-initial rounded bg-label-dark"},[t("i",{class:"bx bx-user"})])],-1),xt={class:"d-flex w-100 flex-wrap align-items-center justify-content-between gap-2"},yt={class:"me-2"},wt={class:"mb-0"},kt={style:{"font-size":"14px"}},It={class:"col-lg-9"},Ct={class:"card px-5 py-3"},zt={class:"blog-header d-flex justify-content-between"},Pt={class:""},Bt={class:"card my-3 py-3"},Dt={class:"col-lg-8 mx-auto"},Nt={class:"card p-5 mt-3"},Tt={class:"blog-body"},$t={class:"fs-6"},jt={class:"card p-5 mt-3"},qt=t("label",{for:"exampleFormControlTextarea1",class:"form-label"},"Izoh qoldirish",-1),Mt={key:0,class:"invalid-input-text"},Ot={class:"d-flex justify-content-end mt-3"};function Vt(s,n,b,u,e,r){const m=f("router-link"),c=f("post-detail-carousel");return i(),l("div",H,[t("div",U,[t("div",Y,[t("div",Z,[t("div",X,[t("ul",G,[t("li",J,[K,t("div",Q,[t("div",R,[W,(i(!0),l(p,null,_(e.categories,a=>(i(),P(m,{to:{path:"/blogs",query:{CategoryId:a.id}}},{default:B(()=>[e.post.categoryId===a.id?(i(),l("h6",tt,o(a.name),1)):v("",!0)]),_:2},1032,["to"]))),256))])])]),t("li",st,[et,t("div",at,[t("div",ot,[it,t("h6",lt,o(e.user.firstName)+" "+o(e.user.lastName),1)])])]),t("li",nt,[rt,t("div",ct,[t("div",dt,[ut,t("h6",mt,o(r.formatDate(e.post.createdAt)),1)])])]),ht])])]),t("div",pt,[t("div",_t,[bt,t("ul",ft,[(i(!0),l(p,null,_(e.postComents,a=>(i(),l("li",vt,[gt,t("div",xt,[t("div",yt,[t("h6",wt,o(a.authorModel.firstName)+" "+o(a.authorModel.lastName),1),t("span",kt,o(a.content),1)])])]))),256))])])])]),t("div",It,[t("div",Ct,[t("div",zt,[t("h3",Pt,o(e.post.title),1)])]),t("div",Bt,[t("div",Dt,[I(c,{listImagesDetail:e.post.images},null,8,["listImagesDetail"])])]),t("div",Nt,[t("div",Tt,[t("p",$t,o(e.post.content),1)])]),t("div",jt,[t("div",null,[qt,C(t("textarea",{"onUpdate:modelValue":n[0]||(n[0]=a=>e.coment.content=a),class:x(["form-control",{"invalid-input":u.v$.coment.content.$error}]),id:"exampleFormControlTextarea1",rows:"3"},null,2),[[z,e.coment.content]]),u.v$.coment.content.$error?(i(),l("div",Mt,o(u.v$.coment.content.$errors[0].$message),1)):v("",!0)]),t("div",Ot,[t("button",{type:"button",onClick:n[1]||(n[1]=(...a)=>r.createComent&&r.createComent(...a)),class:"btn btn-primary"},"Izoh qoldirish")])])])])])}const Ut=g(E,[["render",Vt]]);export{Ut as default};
